<!--
───────────────────────────────────────────────────────────────
───────────────────────────────────────────────────────────────
AI.Quimista Ágil | CARLOS DAVID NAVARRO NAVARRO
17/OCTUBRE/2025 11:16 PM
🌕 NOTA DEL CREADOR — LUNA SINCRONIZADA CON SU CICLO REAL
───────────────────────────────────────────────────────────────

Entre el misterio y el reflejo.

En el lenguaje de la alquimia, la Luna representa el principio femenino,
la receptividad, el reflejo de la conciencia y la mutabilidad del alma.
Donde el Sol simboliza la chispa creadora, la Luna simboliza el espejo
que devuelve su luz, como el inconsciente que transforma energía espiritual
en intuición y sentimiento.

En la tradición esotérica, la Luna gobierna los ritmos de las mareas,
los ciclos de fertilidad y el flujo de las emociones humanas.
Cada fase lunar representa una etapa del viaje interior:

🌑 Luna nueva: el vacío fértil, el momento del renacimiento.  
🌓 Creciente: la expansión de la intención.  
🌕 Llena: la plenitud de la conciencia.  
🌗 Menguante: la liberación, la muerte simbólica antes del nuevo ciclo.

El misterio lunar también ha sido tema de antiguas creencias.
Gurdjieff decía que la Luna “se alimenta” de las almas que no logran despertar,
un símbolo profundo que sugiere que las conciencias dormidas quedan atrapadas
en los ciclos mecánicos de la existencia.

En el folclore europeo, la idea de que la Luna era de queso representa
su naturaleza ilusoria —algo bello y apetecible, pero intangible.

Y la famosa imagen cinematográfica de la bala clavada en el ojo de la Luna
(Le Voyage dans la Lune, 1902) expresa la conquista del misterio,
el deseo humano de penetrar lo desconocido, aunque sea con ingenuidad.

───────────────────────────────────────────────────────────────
✦ FUNCIONAMIENTO TÉCNICO
───────────────────────────────────────────────────────────────

Este código no solo representa la Luna visualmente, sino que sincroniza
su fase real con el calendario astronómico:

• Se calcula el número de días transcurridos desde una luna nueva conocida  
  (2024-01-11T11:57:00Z) y se divide por la duración promedio del mes sinódico  
  (29.53058867 días).

• El resultado determina en qué punto del ciclo está la Luna:  
  de 0 (nueva) a 1 (llena y regreso a nueva).

• El espacio horizontal se divide en 28 columnas (como los días del ciclo lunar visible).

• La Luna se coloca en la columna correspondiente a su fase actual.

• La propiedad --mask-x modifica el gradiente interno que simula la parte iluminada
  y la parte en sombra de la Luna.

• El brillo varía según la hora local: más tenue de día, más resplandeciente de noche,
  evocando la dualidad día/noche y la dependencia lunar del Sol.

• Varios gradientes superpuestos crean la ilusión de cráteres y relieves lunares.

• Un halo sutil de luz blanca da vida al resplandor atmosférico,
  especialmente perceptible durante la luna llena.

───────────────────────────────────────────────────────────────
🌘 SIGNIFICADO INTEGRADOR
───────────────────────────────────────────────────────────────

La Luna, en este proyecto, es el puente entre el cielo y la Tierra.
Representa lo que sentimos, soñamos y recordamos.
Es el espejo del alma colectiva, marcando el ritmo interior
del diseño del cosmos que estás construyendo.

Cada fase visible no es solo un fenómeno astronómico,
sino también un recordatorio del movimiento cíclico del ser:
nacer, crecer, iluminar, soltar.
───────────────────────────────────────────────────────────────
-->

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      background: transparent;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lunar-table {
      display: grid;
      grid-template-columns: repeat(28, 1fr);
      width: 95vw;
      height: 120px;
      background-color: transparent;
    }

    .cell {
      position: relative;
      border: none;
    }

    .moon-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      background-blend-mode: screen;
      transition: all 1s ease-in-out;
      overflow: hidden;
      z-index: 2;
    }

    .moon-shadow {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(10,10,10,0.95) 0%, rgba(10,10,10,0.75) 60%, rgba(10,10,10,0.4) 100%);
      mask-image: radial-gradient(circle at var(--mask-x, 50%) 50%, black 45%, transparent 100%);
      -webkit-mask-image: radial-gradient(circle at var(--mask-x, 50%) 50%, black 45%, transparent 100%);
      transition: all 1.2s ease-in-out;
    }

    .moon-container::after {
      content: "";
      position: absolute;
      inset: -5px;
      border-radius: 50%;
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.35);
      transition: opacity 1s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="lunar-table" id="lunarTable">
    <script>
      for (let i = 0; i < 28; i++) {
        document.write(`<div class="cell" id="day${i}"></div>`);
      }
    </script>
  </div>

  <script>
    function getMoonPhase() {
      const now = new Date();
      const synodicMonth = 29.53058867;
      const knownNewMoon = new Date('2024-01-11T11:57:00Z');
      const diff = (now - knownNewMoon) / (1000 * 60 * 60 * 24);
      return (diff % synodicMonth) / synodicMonth;
    }

    function placeMoon() {
      // Limpia el estado anterior
      document.querySelectorAll('.moon-container').forEach(m => m.remove());

      const phase = getMoonPhase();
      const dayIndex = Math.floor(phase * 28);
      const cell = document.getElementById(`day${dayIndex}`);
      if (!cell) return;

      const now = new Date();
      const hour = now.getHours();

      // La luna es visible todo el día, pero más tenue durante el día
      const isDay = hour >= 6 && hour < 18;

      const distanceToFull = Math.abs(0.5 - phase);
      const intensity = 1 - distanceToFull * 2; // 0 (nueva) → 1 (llena)
      const size = 40 + intensity * 30; // 40px en luna nueva, hasta 70px en llena

      const moon = document.createElement('div');
      moon.className = 'moon-container';
      moon.style.width = `${size}px`;
      moon.style.height = `${size}px`;

      // Transparencia según hora (más tenue de día)
      moon.style.opacity = isDay ? 0.35 : 1;

      // Brillo atmosférico más suave de día
      const glow = isDay ? 0.2 + intensity * 0.3 : 0.5 + intensity * 0.5;
      moon.style.boxShadow = `0 0 ${25 * glow}px rgba(255, 255, 255, ${glow})`;

      // Textura lunar
      moon.style.backgroundImage = `
        radial-gradient(circle at 30% 30%, #ffffff 0%, #e0e0e0 60%, #999999 100%),
        radial-gradient(circle at 20% 40%, rgba(150,150,150,0.3) 2px, transparent 3px),
        radial-gradient(circle at 70% 60%, rgba(120,120,120,0.2) 1.5px, transparent 2px),
        radial-gradient(circle at 50% 20%, rgba(180,180,180,0.25) 2px, transparent 3px)
      `;

      // Sombra lunar (fase)
      const shadow = document.createElement('div');
      shadow.className = 'moon-shadow';
      const maskX = phase <= 0.5
        ? `${100 - phase * 200}%`
        : `${phase * 200}%`;
      shadow.style.setProperty('--mask-x', maskX);

      moon.appendChild(shadow);
      cell.appendChild(moon);
    }

    // Ejecuta al cargar
    placeMoon();

    // Actualiza cada minuto para mantener sincronía real
    setInterval(placeMoon, 60000);

    console.log(`
───────────────────────────────────────────────────────────────
🌕 NOTA DEL CREADOR — LUNA SINCRONIZADA CON SU CICLO REAL
───────────────────────────────────────────────────────────────

Entre el misterio y el reflejo.

En alquimia, la Luna representa el principio femenino, la receptividad
y la mutabilidad del alma. Es el espejo del Sol, el inconsciente que
transforma luz en intuición.

Gobierna los ritmos de las mareas, los ciclos de fertilidad y el flujo
emocional humano. Cada fase lunar es una etapa del viaje interior:

🌑 Luna nueva: vacío fértil, renacimiento.  
🌓 Creciente: expansión de la intención.  
🌕 Llena: plenitud de la conciencia.  
🌗 Menguante: liberación, muerte simbólica.

Creencias antiguas la vinculan con el alma dormida (Gurdjieff), con
ilusiones (el queso lunar), y con el misterio conquistado (la bala en
el ojo — Le Voyage dans la Lune, 1902).

✦ FUNCIONAMIENTO DEL CÓDIGO:
• Calcula la fase lunar real desde una luna nueva conocida.
• Divide el ciclo sinódico (29.53058867 días) para ubicar la fase.
• Distribuye la Luna en una cuadrícula de 28 columnas.
• Simula sombra dinámica con gradientes internos (--mask-x).
• Ajusta el brillo según la hora local (día/noche).
• Añade textura y halo para realismo atmosférico.

🌘 SIGNIFICADO INTEGRADOR:
La Luna es el puente entre cielo y Tierra.
Refleja lo que sentimos, soñamos y recordamos.
Cada fase es un recordatorio del ciclo del ser:
nacer, crecer, iluminar, soltar.

───────────────────────────────────────────────────────────────
`); 
  </script>
</body>
</html>
