<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
      background: transparent;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .moon-container {
      position: relative;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff 0%, #dddddd 60%, #999999 100%);
      background-blend-mode: screen;
      box-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
      overflow: hidden;
    }

    .moon-shadow {
      position: absolute;
      top: 0;
      left: 0;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(10,10,10,0.9) 0%, rgba(10,10,10,0.7) 60%, rgba(10,10,10,0.3) 100%);
      mask-image: radial-gradient(circle at var(--mask-x) 50%, black 50%, transparent 100%);
      -webkit-mask-image: radial-gradient(circle at var(--mask-x) 50%, black 50%, transparent 100%);
      transition: all 1s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="moon-container">
    <div class="moon-shadow"></div>
  </div>

  <script>
    function getMoonPhase() {
      const now = new Date();
      const synodicMonth = 29.53058867;
      const knownNewMoon = new Date('2024-01-11T11:57:00Z');
      const diff = (now - knownNewMoon) / (1000 * 60 * 60 * 24);
      const phase = diff % synodicMonth;
      return phase / synodicMonth;
    }

    const phase = getMoonPhase();
    const shadow = document.querySelector('.moon-shadow');

    // Posici√≥n de la sombra curva (0% = izquierda, 100% = derecha)
    const maskX = phase <= 0.5
      ? `${100 - phase * 200}%`
      : `${phase * 200}%`;

    shadow.style.setProperty('--mask-x', maskX);

    console.log(`üåî Fase lunar: ${(phase*100).toFixed(1)}% | Sombra curva en: ${maskX}`);
  </script>
</body>
</html>
